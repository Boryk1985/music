<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Music</title>

  <style>
    body {
      margin: 0;
      padding: 0;
      background: transparent;
    }
    audio {
      display: none;
    }
  </style>
</head>

<body>

  <audio id="player"></audio>

<script>
const songs = [
  "Enkidu - Falling.mp3",
  "MTNS - Fears.mp3",
  "Sea Oleena - Milk (Official Video).mp3",
  "The Glitch Mob - Becoming Harmonious.mp3"
];

// shuffle
function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

shuffle(songs);

const player = document.getElementById("player");
let index = 0;
let started = false;

function playCurrent() {
  player.src = songs[index];
  player.play().catch(err => {
    console.log("Play blocked:", err);
  });
}

// next song
player.addEventListener("ended", () => {
  index++;
  if (index >= songs.length) {
    shuffle(songs);
    index = 0;
  }
  playCurrent();
});

// REQUIRED: user gesture
document.addEventListener("click", () => {
  if (!started) {
    started = true;
    player.muted = false;
    playCurrent();
  }
});
</script>


</body>
</html>


